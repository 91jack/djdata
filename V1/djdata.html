<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <title>盘州市亦资街道党建大数据服务平台</title>
  <link rel="stylesheet" type="text/css" href="static/css/bigdata.css" />
  <link rel="stylesheet" type="text/css" href="static/layer/theme/default/layer.css" />
</head>

<body id="bigdata">
	<!--顶部-->
	<div class="header">
		<div class="header-border-top"></div>
		<div class="container">
			<div class="date"></div>
			<div class="header-title">盘州市亦资街道党建大数据服务平台</div>
		</div>
		<div class="header-border-bottom"></div>
	</div>

	<!--内容区域-->
	<div class="bigdata-content">
		<div class="container">
			<div class="section1">
				<div class="section-item">
					<div class="section-item-title">
						<h2>非公党建单位</h2>
						<p>Non public party building unit</p>
					</div>
					<div class="section-item-content">
						<ul class="section-item-list" id="cygj">
							<li><span style="background:#E58B26;">1</span><span>重庆红星美凯龙茶园店</span><span>53人</span></li>
							<li><span style="background:#E58B26;">2</span><span>重庆永辉超市有限公司南岸区奥园城市天...</span><span>17人</span></li>
							<li><span style="background:#E58B26;">3</span><span>重庆三力达电子有限公司</span><span>13人</span></li>
							<li><span>4</span><span>重庆金恒物业管理有限公司南岸区分公司</span><span>12人</span></li>
							<li><span>5</span><span>重庆神龙物业管理有限公司</span><span>10人</span></li>
							<li><span>6</span><span>重庆帆禄昊机械制造有限公司</span><span>10人</span></li>
							<li><span>7</span><span>重庆金恒物业管理有限公司南岸区分公司</span><span>12人</span></li>
							<li><span>8</span><span>重庆神龙物业管理有限公司</span><span>10人</span></li>
							<li><span>9</span><span>重庆帆禄昊机械制造有限公司</span><span>10人</span></li>
						</ul>
					</div>
				</div>

			
				<div class="section-item">
					<div class="section-item-title">
						<h2>非公党建单位行业分类</h2>
						<p>Industry classification </p>
					</div>
					<div class="section-item-content barchart">
						<!--柱状图-->
						<div id="barchart"></div>
					</div>
				</div>
			</div>

			<div class="section2">
				<!--顶部数据展示-->
				<div class="section2-top-data">
					<div class="item-level">
						<div class="item-level-one">
							<span>党员服务量</span>
							<span><ol class="fwrq"></ol><em>人</em></span>
						</div>

						<!--<ul class="item-level-two">
							<li data-title="线上登记库" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/hrlibs.html">
								<span>线上登记库</span>
								<span><b class="xsdjk"></b>人</span>
							</li>
							<li data-title="失业人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/sylist.html">
								<span>失业人员</span>
								<span><b class="shiye"></b>人</span>
							</li>
							<li data-title="低保户" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/dibaohu.html">
								<span>低保户</span>
								<span><b class="dibao"></b>人</span>
							</li>
							<li data-title="高校毕业生" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/gxbys.html">
								<span>高校毕业生</span>
								<span><b class="gaoxiao"></b>人</span>
							</li>
							<li data-title="就业困难人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/kunnan.html">
								<span>就业困难人员</span>
								<span><b class="kunnan"></b>人</span>
							</li>
						</ul>-->
					</div>

					<div class="item-level">
						<div class="item-level-one">
							<span>候鸟党员服务量</span>
							<span><ol class="gongyi"></ol><em>人</em></span>
						</div>

						<!--<ul class="item-level-two">
							<li data-title="夜市摊位数" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/booth.html">
								<span>夜市摊位数</span>
								<span><b class="yeshi"></b>人</span>
							</li>
							<li data-title="创业一条街" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/shops.html">
								<span>创业一条街</span>
								<span><b class="chuangye"></b>人</span>
							</li>
							<li data-title="定向帮扶" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/jpdxbf.html">
								<span>定向帮扶</span>
								<span><b class="dxbf"></b>人</span>
							</li>
						</ul>-->
					</div>

					<div class="item-level">
						<div class="item-level-one">
							<span>党建联建</span>
							<span><ol class="chenggong"></ol><em>个</em></span>
						</div>

						<!--<ul class="item-level-two last">
							<li data-title="线下成功就业人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/feedback.html">
								<span>线下成功<br/>就业人员</span>
								<span><b class="xianxia"></b>人</span>
							</li>
							<li data-title="线上自动配对成功人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/employed.html">
								<span>线上自动配<br/>对成功人员</span>
								<span><b class="xianshang"></b>人</span>
							</li>
						</ul>-->
					</div>
				</div>

				<!--贵州地图-->
				<div class="section2-chart">
					<div class="map-list">
						<a href="javascript:;" ><i></i>亦资居委会党支部</a>
						<a href="javascript:;"><i></i>亦资街道党工委</a>
					</div>
					<div class="map-box">
						<div class="map" id="mapchart"></div>
						<div class="map" id="map" style="display: none;">
							<div class="map-wrap">
								<img src="static/mapimg/0.png"/>
							</div>
							<div class="map-num">
								<a href="javascript:;" style="left:1.8rem;top:15rem;" data-index="1">1</a>
								<a href="javascript:;" style="left:1.65rem;top:19.15rem;" data-index="2">2</a>
								<a href="javascript:;" style="left:1.6rem;top:24.25rem;" data-index="3">3</a>
								<a href="javascript:;" style="left:6.95rem;top:16.65rem;" data-index="4">4</a>
								<a href="javascript:;" style="left:5.5rem;top:23.6rem;" data-index="5">5</a>
								<a href="javascript:;" style="left:8rem;top:24.6rem;" data-index="6">6</a>
								
								<a href="javascript:;" style="left:11rem;top:23.45rem;" data-index="7">7</a>
								
								<a href="javascript:;" style="left:9.15rem;top:19rem;" data-index="8">8</a>
								<a href="javascript:;" style="left:7.95rem;top:21.4rem;" data-index="9">9</a>
								<a href="javascript:;" style="left:7.8rem;top:10.7rem;" data-index="10">10</a>
								
								<a href="javascript:;" style="left:14.45rem;top:21.25rem;" data-index="11">11</a>
								<a href="javascript:;" style="left:16.15rem;top:15.15rem;" data-index="12">12</a>
								<a href="javascript:;" style="left:17rem;top:20.4rem;" data-index="13">13</a>
								<a href="javascript:;" style="left:17rem;top:16rem;" data-index="13">13</a>
								<a href="javascript:;" style="left:18.55rem;top:20rem;" data-index="14">14</a>
								<a href="javascript:;" style="left:14.2rem;top:17rem;" data-index="14">14</a>
								
								<a href="javascript:;" style="left:12.5rem;top:13.5rem;" data-index="15">15</a>
								<a href="javascript:;" style="left:16.8rem;top:11.4rem;" data-index="16">16</a>
								<a href="javascript:;" style="left:14.65rem;top:8.3rem;" data-index="17">17</a>
								<a href="javascript:;" style="left:16rem;top:1.35rem;" data-index="18">18</a>
								<a href="javascript:;" style="left:13.8rem;top:3.95rem;" data-index="19">19</a>
								<a href="javascript:;" style="left:16.8rem;top:13.4rem;" data-index="20">20</a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="section3">
				<div class="section-item">
					<div class="section-item-title">
						<h2>支部学习实时动态</h2>
						<p>Real time dynamic </p>
					</div>
					<div class="section-item-content">
						<div class="section3-tab-btn">
							<a href="javascript:;" class="active">党支部1</a>
							<a href="javascript:;">党支部2</a>
							<a href="javascript:;">党支部3</a>
							<a href="javascript:;">党支部4</a>
							<a href="javascript:;">党支部5</a>
							
						</div>

						<div class="section3-tab-content">
							<ul class="section3-top-list ">
								<li>
									<span class="sort">1</span>
									<span class="theme">党建学习主题</span>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
								</li>
								<li>
									<span class="sort">1</span>
									<span class="theme">党建学习主题</span>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
								</li>
								<li>
									<span class="sort">1</span>
									<span class="theme">党建学习主题</span>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
								</li>
								<li>
									<span class="sort">1</span>
									<span class="theme">党建学习主题</span>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
									<p>
										<span>候鸟党员</span>
										<em>52580人</em>
									</p>
								</li>
							</ul>
							<!--<ul class="section-item-list jyfwrq active"></ul>
							<ul class="section-item-list fwdw"></ul>
							<ul class="section-item-list booth"></ul>
							<ul class="section-item-list shops"></ul>
							<ul class="section-item-list gygw"></ul>
							<ul class="section-item-list booth"></ul>
							<ul class="section-item-list shops"></ul>
							<ul class="section-item-list gygw"></ul>-->
						</div>

					</div>
				</div>

				
				<div class="section-item  clearfix">
					<div class="section-item-title">
						<h2>党建线上互动实时动态</h2>
						<p>Real time dynamic</p>
					</div>
					<div class="section-item-content">
						<ul class="section-item-list section3-list">
							<ul>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="footerchart">
		<div class="container">
			<div class="section-item footer-left-item">
				<div class="section-item-title">
					<h2>亦资街道基层党建人力分布图</h2>
					<p>Human distribution map </p>
				</div>
				<div class="piechart-wrap">
					<div class="piechart">
						<div id="piechart1" ></div>
						<p>年龄</p>
					</div>    
					<div class="piechart">
						<div id="piechart2"></div>
						<p>学历</p>
					</div>
					<div class="piechart">
						<div id="piechart3"></div>
						<p>政治面貌</p>
					</div>
					<div class="piechart">
						<div id="piechart4"></div>
						<p>就业困难<br/>人员</p>
					</div>
					<div class="piechart">
						<div id="piechart5"></div>
						<p>大学<br/>毕业生</p>
					</div>

					<div class="piechart">
						<div id="piechart6"></div>
						<p>性别</p>
					</div>

					<div class="piechart">
						<div id="piechart7"></div>
						<p>就业状态</p>
					</div>

					<div class="piechart">
						<div id="piechart8"></div>
						<p>残疾</p>
					</div>
				</div>
			</div>

			<div class="section-item footer-right-item">
				<div class="section-item-title">
					<h2>智慧亦资服务量(月)</h2>
					<p>Amount of use </p>
				</div>
				<div id="linechart"></div>
			</div>
		</div>
	</div>
	
	<!--弹窗1-->
	<div class="popup popup1">
		<div class="img-box">
			<img src="static/images/banner.png"/>
		</div>
		<div class="content">
			<p>单位名称：1111111111111</p>
			<p>单位地址：1111111111111</p>
			<p>员工数量：1111111111111</p>
			<p>是否有党群组织：<span style="color: #1E9FFF;">是</span></p>
			<p>党组织介绍：1111111</p>
		</div>
	</div>
		
	<!--弹窗2-->
	<div class="popup popup2">
		<div class="img-box">
			<img src="static/images/banner.png"/>
		</div>
		<div class="content">
			<p>学习主题：1111111111111</p>
			<p class="party clearfix">
				<span>党支部人数：110人</span>
				<span>流动党员人数：110人</span>
				<span>学习完成率：95%</span>
			</p>
			<div class="section-item clearfix">
				<h2>未学习</h2>
				<div class="section-body">
					<p>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
					</p>
					<p>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
					</p>
				</div>
			</div>
			<div class="section-item clearfix">
				<h2>已学习</h2>
				<div class="section-body">
					<p>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
					</p>
					<p>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
						<span>战三</span>
					</p>
				</div>
			</div>
		</div>
	</div>
	
<script src="static/js/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>
<script src="static/js/common.js"></script>
<script src="static/js/scroll.js" type="text/javascript" charset="utf-8"></script>
<script src="static/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
<script src="static/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	$(function(){
		$(".section-item-content").myScroll({
			speed:40, //数值越大，速度越慢
			rowHeight:40 //li的高度
		});
	});

		$('.map-list a').click(function(){
			var index = $(this).index();
			$('.map-box .map').eq(index).show().siblings().hide();
		})
	
	
		// 地图切换
		$('.map-num a').each(function(){
			$(this).hover(function(){
				var index = $(this).attr('data-index');
				$('.map-wrap img').attr('src','static/mapimg/'+index+'.png');
			})
		})
	
	
	
			$(function() {
				// 非公党建单位
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/cygj?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						var str = '';
						for(var i = 0; i < res.data.length; i++) {
							str += "<li>"
							if(i < 3) {
								str += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								str += "<span>" + (i + 1) + "</span>"
							}
							
							// 字符串截取
							if(res.data[i].cp_name.length > 18) {
								var cp_name = res.data[i].cp_name.substr(0, 18) + '...';
							} else {
								var cp_name = res.data[i].cp_name
							}

							str += "<span>" + cp_name + "</span>" +
								"<span>" + res.data[i].num + "人</span>" +
								"</li>"
						}

						$('#cygj').append(str);
						$('#cygj').append(str);
						
						$(".section-item-list").myScroll({
							speed:40, //数值越大，速度越慢
							rowHeight:68 //li的高度
						});
						
						$('#cygj li').on('click', function(){
					    layer.open({
					      type: 1,
					      area: ['880px', '880px'],
					      title:'xxxx党组织部',
					      shade:0.2,
					      shadeClose: true, //点击遮罩关闭
					      content: $('.popup1')
					    });
					  });
					}
				});
				
				$('.section3-top-list li').on('click', function(){
				    layer.open({
				      type: 1,
				      area: ['880px', '880px'],
				      title:'xxxx党组织部',
				      shade:0.2,
				      shadeClose: true, //点击遮罩关闭
				      content: $('.popup2')
				    });
				});
			
	

				// 服务人群，公益性岗位，成功服务量
				tongjiDom()
				// 10S钟刷新
				setInterval(function() {
					tongjiDom()
				}, 50000)

				function tongjiDom() {
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/t3?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							// 服务人群
							var fwrq = res.data.fwrq;
							//console.log($('.fwrq').text());
							var oldNum = $('.fwrq .old').text();
							//console.log(oldNum)
							$('.fwrq').html(updateNum(oldNum, fwrq.fwrq));
							$('.xsdjk').text(fwrq.xsdjk);
							$('.shiye').text(fwrq.shiye);
							$('.dibao').text(fwrq.dibao);
							$('.gaoxiao').text(fwrq.gaoxiao);
							$('.kunnan').text(fwrq.kunnan);

							// 公益性岗位
							var gongyi = res.data.gongyi;
							var oldNum = $('.gongyi .old').text();
							$('.gongyi').html(updateNum(oldNum, gongyi.yeshi * 1 + gongyi.chuangye * 1 + gongyi.dxbf * 1));
							$('.yeshi').text(gongyi.yeshi);
							$('.chuangye').text(gongyi.chuangye);
							$('.dxbf').text(gongyi.dxbf);

							// 成功服务量
							var chenggong = res.data.chenggong;
							var oldNum = $('.chenggong .old').text();
							$('.chenggong').html(updateNum(oldNum, chenggong.xianxia * 1 + chenggong.xianshang * 1));
							$('.xianxia').text(chenggong.xianxia);
							$('.xianshang').text(chenggong.xianshang);
						}
					});
				}

				// 就业动车社会效益展示
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/sbd?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res.data)
						var fwrqStr = '';
						for(var i = 0; i < res.data.fwrq.length; i++) {
							fwrqStr += "<li>"
							if(i < 3) {
								fwrqStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								fwrqStr += "<span>" + (i + 1) + "</span>"
							}
							fwrqStr += "<span>" + res.data.fwrq[i].ptype + "</span>" +
								"<span>" + res.data.fwrq[i].num + "人</span>" +
								"</li>"
						}
						// 服务人群
						$('.jyfwrq').append(fwrqStr)

						var fwdwStr = '';
						for(var i = 0; i < res.data.fwdw.length; i++) {
							fwdwStr += "<li>"
							if(i < 3) {
								fwdwStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								fwdwStr += "<span>" + (i + 1) + "</span>"
							}
							fwdwStr += "<span>" + res.data.fwdw[i].cp_name + "</span>" +
								"<span>" + res.data.fwdw[i].num + "人</span>" +
								"</li>"
						}
						// 服务单位
						$('.fwdw').append(fwdwStr)

						var boothStr = '';
						for(var i = 0; i < res.data.booth.length; i++) {
							boothStr += "<li>"
							if(i < 3) {
								boothStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								boothStr += "<span>" + (i + 1) + "</span>"
							}
							boothStr += "<span>" + res.data.booth[i].type + "</span>" +
								"<span>" + res.data.booth[i].jy_num + "人</span>" +
								"</li>"
						}
						// 夜市摊位
						$('.booth').append(boothStr)

						var shopsStr = '';
						for(var i = 0; i < res.data.shops.length; i++) {
							shopsStr += "<li>"
							if(i < 3) {
								shopsStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								shopsStr += "<span>" + (i + 1) + "</span>"
							}
							shopsStr += "<span>" + res.data.shops[i].sp_name + "</span>" +
								"<span>" + res.data.shops[i].jy_num + "人</span>" +
								"</li>"
						}
						// 创业街
						$('.shops').append(shopsStr)

						var gygwStr = '';
						for(var i = 0; i < res.data.gygw.length; i++) {

							gygwStr += "<li>"
							if(i < 3) {
								gygwStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								gygwStr += "<span>" + (i + 1) + "</span>"
							}
							gygwStr += "<span>" + res.data.gygw[i].cp_name + "</span>" +
								"<span>" + res.data.gygw[i].ac_name + "</span>" +
								"</li>"
						}
						// 公益岗位
						$('.gygw').append(gygwStr)
					}
				});

				// 就业动车社会效益展示 tab切换
				$('.section3-tab-btn a').each(function() {
					$(this).on('click', function() {
						var index = $(this).index()
						$(this).addClass('active').siblings().removeClass('active');
						$('.section3-tab-content ul').eq(index).addClass('active').siblings().removeClass('active');
					})
				})
				// 社会动车效益自动切换展示
				var index=0;
				setInterval(function(){
					index++;
					if(index>$('.section3-tab-btn a').length-1){
						index=0;
					}
					$('.section3-tab-btn a').eq(index).addClass('active').siblings().removeClass('active');
					$('.section3-tab-content ul').eq(index).addClass('active').siblings().removeClass('active');
				},5000)
				
				

				// 就业动车岗位分类展示
				var xData = [];
				var barData = [];
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/jobcate?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res.data)
						xData = ['服务类', '技术类', '销售类', '质检类', '其他类']
						barData = [res.data.fwl_count, res.data.jsl_count, res.data.xsl_count, res.data.zjl_count, res.data.qtl_count];
						barChartFn(xData, barData)
					}
				});

				//就业动车实时动态
				jydcDom()

				// 5S钟刷新1次
				setInterval(function() {
					jydcDom()
				}, 5000)

				function jydcDom() {
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/rtdynamic?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							//console.log(res)
							var str = '';
							str += "	<li><span>用户名</span><span>时间</span></li>";
							for(var i = 0; i < res.data.users.length; i++) {
								if(res.data.users[i].nick_name.length > 10) {
									var nick_name = res.data.users[i].nick_name.substr(0, 10) + '...'
								} else {
									var nick_name = res.data.users[i].nick_name
								}

								var time = formatDateTime(res.data.users[i].last_time * 1000)

								str += "<li>" +
									"<span>" + nick_name + "</span>" +
									"<span>" + time + "</span>" +
									"</li>"
							}

							$('.section3-list').html(str);

						}
					});
				}

				//就业动车关注度
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/channel?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res)
						var xlineData = res.xaxis_data;
						var linejobData = res.series_job;
						var linehelpData = res.series_help;
						var linetrainData = res.series_train;
						var linepublicData = res.series_public;
						lineChartFn(xlineData, linejobData, linehelpData, linetrainData, linepublicData)
					}
				});

				// 就业动车网格服务人力分布图
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/grid?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res)
						pieChart1Fn(res.data.age);
						pieChart2Fn(res.data.education);
						pieChart3Fn(res.data.zzmm);
						pieChart4Fn(res.data.kunnan);
						pieChart5Fn(res.data.daxue);
						pieChart6Fn(res.data.sex);
						pieChart7Fn(res.data.getjob);
						pieChart8Fn(res.data.canji);

						// 饼图轮播
						var n = 0;
						setInterval(function() {
							n++;
							$('.piechart-wrap').css({
								'transform': 'translateX(' + -13 * n + 'rem)'
							});
							if(n > 2) {
								n = 0;
							}
						}, 10000)

					}
				});


				// 贵州区域地图
				//绘制贵州地图
				mapFn()
				
//				setInterval(function(){
//					mapFn();
//				},15000)
				
				
				
				var mapChart = echarts.init(document.getElementById('mapchart'));
				$.getJSON('./static/js/guizhou.json', function(data) {
					d = [];
					for(var i = 0; i < data.features.length; i++) {
						d.push({
							name: data.features[i].properties.name
						})
					}
					mapdata = d;
					//注册地图
					echarts.registerMap('guizhou', data);
	
					mapChart.setOption(option = {
						backgroundColor: '#0C0026',
						tooltip: {
							trigger: 'item',
							padding: 10,
							formatter: function(params) {
								return '居民人数:111人<br/>'+'流动人口:1111人<br/>'+'党员总数:111111111人<br/>流动党员:111111111人<br/>商家量:11家<br/>党员示范店:111家<br/>'
								//return params.name + '<br/>' + '户籍所在地 ： ' + params.value + '人' + '<br/>现居地 ： ' + params.data.num + '人';
							}
						},
							
						geo: {
							map: 'guizhou',
							label: {
								emphasis: {
									show: true,
									textStyle: {
										color: '#fff'
									}
								}
							},
							zoom: 1.2,
							roam: false,
						},
						
					})
				})
				
				function mapFn(){
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/map?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							//console.log(res)
							var mapData = [];
	
							var list = res.data.list
	
							for(var i = 0; i < list.length; i++) {
								mapData.push({
									name: list[i].name,
									value: list[i].hj_num * 1,
									num: list[i].num * 1
								})
							}
							
							option = {
								series:[
									{
                    type: 'map',
                    mapType: 'guizhou',
                    roam: false,
                    nameMap:{
                        'guizhou':'贵州'
                    },
                    zoom: 1.2,
                    itemStyle: {
                        normal: {
                            areaColor: '#52b2fe',
                            borderColor: '#6ad7ff'
                        },
                        emphasis: {
                            areaColor: 'darkorange'
                        }
                    },
                    data: mapData,
                    zlevel: 0,
               		},
									{
										name: '用户坐标',
										type: 'scatter',
										coordinateSystem: 'geo',
										data: [{name:'亦资街道党工委',value:[104.474329,25.708555,100]}],
				            tooltip: {
				            	trigger: 'item',
				            	formatter: '{b}'
				            },
				            symbol:'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACyElEQVQ4T5WVX0hTcRTHv+fu7m7ebZHmn6E0UnwRIShfErZhL1H40osFRYpKQlhgRPVSBEEPJdFThFpiERVJsCLqfTMksN4FTfujTlPS5ubc3d2Je7e5u7uJ+Xv8ne/5/M45v/M7P0KRxU1NckyWzwA4CeAQgGpdRjQH5i/MHHCo6isaH98wu5N5I+r1doHoLoDyYocZ9sLMfN05NvbMqNsCcmOjFCsrGwTQsQMo30w0LFdV9dDoqKonkbVG/f6nYG7fFSwrJhp2BIPdW8BMmk+2hVkJliMu8JKC1GRB2XQ3Zu7Q0iduaXHGVHUWwL7tgFRuBUdUSH3VoD0iEvd+gtf0DI0rLCeTdRT1entANFAMZml2QbpYDSoVkXi4gOTHP7DfrwUkAfHL00CC89yYuYuifv8HMJ8wAzWY7YYHEAnqxDo2b30HkgzLQQds/bVQBsNQ3iyb3d5S1OdbAlBhtAgeG+yP6nWYXp9lBfGrM+D5hH6N8rtGpGbjiF+aNt/4nAbMjzsjsXZXQfDYwSsKxNayPGjJaAOQSGHj7KQ5Qt4WqCsF0q4PUl8NxOOlOjTxYA62OweQmtpAvNcUIaADFwFUGo8Sj5XqDqlv8fS2QJCu1UA8uhfQ8iFAGVmE8vK3OcJfGvA9gFajRSu6pUGGEliBGlwDryYh7LdBuukBlQi6NN47hdRU5sCcs34p5wFoTy4dTL0dtv46IKZC67+CIkVUkMsC9dNfbN7+kd82QGe2sWeyw4AqrZC63EgMLECotUNrH6qwgldVqBMRqJ8jsJ6qQDKwAo7mNXe6sbUjdnx6xbretMfAOWco9Dw3HHy+kV1Pmhz0sSMU0kqXmzbc1maJhcNDADr/IyCjZEh2uy8UjK+sYt3rbaf0gHXvAA4z0RVnMPjCqCuY2JqRm5tLoqJ4mtJfwOHMF6B14DyAr0wUcCjK62JfwD/IeBZykY1nKQAAAABJRU5ErkJggg==',
										symbolSize:20,
									}
								]
							} 
							mapChart.setOption(option)
						}
					});
				}
			
			
				
				

				// 柱状图
				// 基于准备好的dom，初始化echarts实例
				var barChart = echarts.init(document.getElementById('barchart'));
				function barChartFn(xData, barData) {
					var barOption = {
						color: ['#3398DB'],
						tooltip: {
							trigger: 'axis',
							axisPointer: { // 坐标轴指示器，坐标轴触发有效
								type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
							}
						},
						grid: {
							top: '10%',
							left: '0',
							right: '0',
							bottom: '0',
							containLabel: true
						},
						xAxis: [{
							type: 'category',
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

							axisTick: {
								show: false,
								alignWithLabel: true
							},
							axisLabel: {
								color: '#fff',
							},
							data: xData,

						}],
						yAxis: [{
							type: 'value',
							axisLabel: {
								color: '#fff',
							},
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
							splitLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
						}],
						series: [{
							name: '岗位数量',
							type: 'bar',
							barMaxWidth: '10',
							itemStyle: {
								normal: {
									color: new echarts.graphic.LinearGradient(
										0, 0, 0, 1, [{
												offset: 0,
												color: '#C308CB'
											},
											{
												offset: 1,
												color: '#7704D1'
											}
										]
									)
								},
							},
							data: barData
						}]
					};

					// 使用刚指定的配置项和数据显示图表。
					barChart.setOption(barOption);
				}
					

				// 时间
				// 获取本地时间
				function timeFn() {
					var nowdate = new Date();
					var y = nowdate.getFullYear();
					var m = nowdate.getMonth() + 1;
					var d = nowdate.getDate();
					var h = nowdate.getHours();
					var minutes = nowdate.getMinutes();
					var s = nowdate.getSeconds();
					m = m < 10 ? '0' + m : m;
					d = d < 10 ? '0' + d : d;
					h = h < 10 ? '0' + h : h;
					minutes = minutes < 10 ? '0' + minutes : minutes;
					s = s < 10 ? '0' + s : s;
					var nowTime = y + '年' + m + '月' + d + '日&nbsp;&nbsp;' + h + ':' + minutes + ':' + s;
					$('.date').html(nowTime)
				}

				timeFn();

				setInterval(function() {
					timeFn()
				}, 1000)

				// 圆环图
				// 年龄
				function pieChart1Fn(age) {
					var pieChart1 = echarts.init(document.getElementById('piechart1'));
					var pieOption1 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 30],
							textStyle: {
								color: '#fff',
							},
							data: ['25岁及以下', '25-35', '35-45', '45岁及以上']
						},
						series: [{
							name: '年龄',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',
								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							data: [{
									value: age["25lt"],
									name: '25岁及以下'
								},
								{
									value: age["2535"],
									name: '25-35'
								},
								{
									value: age["3545"],
									name: '35-45'
								},
								{
									value: age["45gt"],
									name: '45岁及以上'
								},

							]
						}]
					}
					pieChart1.setOption(pieOption1);
				}

				// 学历
				function pieChart2Fn(education) {
					var pieChart2 = echarts.init(document.getElementById('piechart2'));
					var pieOption2 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['高中及以上', '专科及以上', '大学及以上']
						},
						series: [{
							name: '学历',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							minAngle: 20,
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							data: [{
									value: education["gaozhong"],
									name: '高中及以上'
								},
								{
									value: education["zhuanke"],
									name: '专科及以上'
								},
								{
									value: education["benke"],
									name: '大学及以上'
								},
							]
						}]
					}
					pieChart2.setOption(pieOption2);
				}

				// 政治面貌
				function pieChart3Fn(zzmm) {
					var pieChart3 = echarts.init(document.getElementById('piechart3'));
					var pieOption3 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['党员', '无党派人士', '非党员的其他党派']
						},
						tooltip:{},
						series: [{
							name: '政治面貌',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: zzmm["dangyuan"],
									name: '党员'
								},
								{
									value: zzmm["wudangpai"],
									name: '无党派人士'
								},
								{
									value: zzmm["qitadang"],
									name: '非党员的其他党派'
								},
							]
						}]
					}
					pieChart3.setOption(pieOption3);
				}

				// 就业困难人员
				function pieChart4Fn(kunnan) {
					var pieChart4 = echarts.init(document.getElementById('piechart4'));
					var pieOption4 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['4050人员', '低保家庭', '零就业家庭']
						},
						series: [{
							name: '就业困难人员',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: kunnan["4050"],
									name: '4050人员'
								},
								{
									value: kunnan["dibao"],
									name: '低保家庭'
								},
								{
									value: kunnan["lingjiuye"],
									name: '零就业家庭'
								},

							]
						}]
					}
					pieChart4.setOption(pieOption4);
				}

				// 大学毕业生
				function pieChart5Fn(daxue) {
					var pieChart5 = echarts.init(document.getElementById('piechart5'));
					var pieOption5 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['男', '女']
						},
						tooltip: {
				        trigger: 'item',
				        formatter: "你in我近底价和覅基恩"
				    },
						series: [{
							name: '大学毕业生',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							 itemStyle: {
                emphasis: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
        },      
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: daxue["nan"],
									name: '男'
								},
								{
									value: daxue["nv"],
									name: '女'
								},
							]
						}]
					}
					pieChart5.setOption(pieOption5);
				}

				// 性别
				function pieChart6Fn(sex) {
					var pieChart6 = echarts.init(document.getElementById('piechart6'));
					var pieOption6 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['男', '女']
						},
						series: [{
							name: '性别',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: sex["nan"],
									name: '男'
								},
								{
									value: sex["nv"],
									name: '女'
								},
							]
						}]
					}
					pieChart6.setOption(pieOption6);
				}

				// 就业状态
				function pieChart7Fn(getjob) {
					var pieChart7 = echarts.init(document.getElementById('piechart7'));
					var pieOption7 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['失业中', '已就业']
						},
						series: [{
							name: '就业状态',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: getjob["shiye"],
									name: '失业中'
								},
								{
									value: getjob["jiuye"],
									name: '已就业'
								},
							]
						}]
					}
					pieChart7.setOption(pieOption7);
				}

				// 残疾
				function pieChart8Fn(canji) {
					var pieChart8 = echarts.init(document.getElementById('piechart8'));
					var pieOption8 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						legend: {
							bottom: '0',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['45岁及以上', '45岁以下']
						},
						series: [{
							name: '残疾',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: canji["45gt"],
									name: '45岁及以上'
								},
								{
									value: canji["45lt"],
									name: '45岁以下'
								},
							]
						}]
					}
					pieChart8.setOption(pieOption8);
				}

				// 折线图
				function lineChartFn(xlineData, linejobData, linehelpData, linetrainData, linepublicData) {
					var lineChart = echarts.init(document.getElementById('linechart'));
					var lineOption = {
						color: ['#DD5858', '#00B37A', '#D79D4B', '#40B3E2'],
						tooltip: {
							trigger: 'axis'
						},
						legend: {
							top: 3,
							textStyle: {
								color: '#fff',
							},
							data: ['党群E家','阳光政务','诚信之家']
						},
						grid: {
							top: '18%',
							left: '5%',
							right: '0',
							bottom: '2%',
							containLabel: true
						},
						xAxis: [{
							type: 'category',
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

							axisTick: {
								show: false,
								alignWithLabel: true
							},
							axisLabel: {
								color: '#fff',
								rotate: 50,
							},

							data: xlineData

						}],

						yAxis: {
							type: 'value',
							axisLabel: {
								color: '#fff',
							},
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
							splitLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

						},
						series: [{
								name: '党群E家',
								type: 'line',
								data: linejobData
							},
							{
								name: '阳光政务',
								type: 'line',
								data: linehelpData
							},
							{
								name: '诚信之家',
								type: 'line',
								data: linetrainData
							}
							

						]
					};

					lineChart.setOption(lineOption);
				}

			})
	
		// 时间格式化
			function formatDateTime(inputTime) {
				var date = new Date(inputTime);

				var y = date.getFullYear();
				var m = date.getMonth() + 1;
				m = m < 10 ? ('0' + m) : m;
				var d = date.getDate();
				d = d < 10 ? ('0' + d) : d;
				var h = date.getHours();
				h = h < 10 ? ('0' + h) : h;
				var minute = date.getMinutes();
				var second = date.getSeconds();
				minute = minute < 10 ? ('0' + minute) : minute;
				second = second < 10 ? ('0' + second) : second;
				return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
			}

			// 弹窗
			$('.item-level-two li').each(function() {
				$(this).click(function() {
					layer.open({
						type: 2,
						title: $(this).attr('data-title'),
						shadeClose: true,
						shade: 0.8,
						offset: '10%',
						area: ['80%', '80%'],
						content: $(this).attr('data-href') //iframe的url
					});
				})
			})

			// 数字滚动增加特效
			function updateNum(oldNum, newNum) {
				console.log(oldNum,newNum)
				// 将数字转为字符串
				var oldNum = oldNum.toString();
				var newNum = newNum.toString();

				numberHTML = '';
				for(var i = newNum.length - 1; i >= 0; i--) {
					if(oldNum[i] !== newNum[i]) {
						if(oldNum[i] == undefined || oldNum[i] == null || oldNum[i] == "") {
							if(newNum[i] != ",")
								numberHTML = "<li class=\"group active\">" +
								"<span class=\"old\">0</span>" +
								"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
							else
								numberHTML = "<li class=\"group active\">" +
								"<span class=\"old\">,</span>" +
								"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
						} else
							numberHTML = "<li class=\"group active\">" +
							"<span class=\"old\">" + oldNum[i] + "</span>" +
							"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
					} else {
						numberHTML = "<li class=\"group\">" +
							"<span class=\"old\">" + oldNum[i] + "</span>" +
							"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
					}

				}
				return numberHTML;
			}
			
			
			
		</script>
	</body>

</html>